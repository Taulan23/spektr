#!/bin/bash

echo "üå≤ –ú–û–ù–ò–¢–û–†–ò–ù–ì –ú–ï–ì–ê-–°–ò–°–¢–ï–ú–´ 19 –í–ò–î–û–í üå≤"
echo "========================================"

while true; do
    clear
    echo "üå≤ –ú–û–ù–ò–¢–û–†–ò–ù–ì –ú–ï–ì–ê-–°–ò–°–¢–ï–ú–´ 19 –í–ò–î–û–í üå≤"
    echo "========================================"
    echo "‚è∞ $(date '+%H:%M:%S')"
    echo ""
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
    if pgrep -f mega_system_19_species > /dev/null; then
        echo "‚úÖ –°–¢–ê–¢–£–°: –†–ê–ë–û–¢–ê–ï–¢"
        
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
        ps aux | grep mega_system_19_species | grep -v grep | while read line; do
            echo "üìä CPU: $(echo $line | awk '{print $3}')%"
            echo "üíæ RAM: $(echo $line | awk '{print $4}')%"
            echo "‚è±Ô∏è  –í—Ä–µ–º—è: $(echo $line | awk '{print $10}')"
        done
        
        echo ""
        echo "üìã –ü–û–°–õ–ï–î–ù–ò–ï –°–¢–†–û–ö–ò –õ–û–ì–ê:"
        echo "------------------------"
        tail -n 5 mega_19_log.txt 2>/dev/null || echo "–õ–æ–≥ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω..."
        
    else
        echo "üèÅ –ü–†–û–¶–ï–°–° –ó–ê–í–ï–†–®–ï–ù!"
        
        if [ -f mega_19_log.txt ]; then
            echo ""
            echo "üìã –§–ò–ù–ê–õ–¨–ù–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:"
            echo "----------------------"
            tail -n 20 mega_19_log.txt
        fi
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
        echo ""
        echo "üìÅ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´:"
        echo "-----------------"
        ls -la mega_19_species_* 2>/dev/null || echo "–§–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
        ls -la *19_species*.png 2>/dev/null || echo "–ì—Ä–∞—Ñ–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
        
        break
    fi
    
    echo ""
    echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥... (Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞)"
    sleep 30
done 